# SPDX-FileCopyrightText: tools/pypsa/features.yaml CODEOWNERS
# SPDX-FileCopyrightText: openmod-features contributors
#
# SPDX-License-Identifier: CC-BY-4.0

# yaml-language-server: $schema=https://raw.githubusercontent.com/open-energy-transition/openmod-features/000bf8a/schema/schema.yaml
features:
  asset__candidates:
    converters:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/links/
      value: y
    electricity_transmission:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/lines/
      value: y
    endogenous:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
    exogenous:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
    fluid_or_gas_distribution:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/links/
      value: y
    generators:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
      value: y
    loads:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/loads/
      value: y
    storage:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/stores/
      value: y
  asset__capacity_representation:
    grouped:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
      value: y
    partial_grouped:
      source: []
      value: n
    units:
      source: []
      value: n
  asset__chaining:
    asset_linking:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/chained-hydro-reservoirs/
    stockpiling:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/stores/
      value: y
  asset__cost__investment:
    annuitisation:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/objective/#investment-costs
      value: y
    linear:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/objective/#investment-costs
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
    piecewise:
      source: []
      value: n
    subsidy/penalty:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/custom-constraints/#custom-constraints
      value: dev
    unit:
      source: []
      value: n
  asset__cost__operation:
    linear:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/objective/#marginal-costs
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
    piecewise:
      source: []
      value: n
    subsidy/penalty:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/custom-constraints/#custom-constraints
      value: dev
    unit:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/unit-commitment/#start-up-and-shut-down
  asset__operating_characteristics:
    iterative:
      source: []
      value: n
    linear:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
    piecewise:
      source:
        - https://docs.pypsa.org/latest/examples/demand-elasticity/#piecewise-linear-demand-curve
      value: dev
    static non_dimensional:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
    static_dimensional:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/generators/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/components/stores/
        - https://docs.pypsa.org/latest/user-guide/components/storage-units/
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/transformers/
      value: y
  asset__operating_constraints:
    inter_spatial:
      source:
        - https://docs.pypsa.org/latest/user-guide/design/#buses
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/links/
      value: y
    inter_temporal:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/unit-commitment/#ramping
        - https://docs.pypsa.org/latest/examples/unit-commitment/#ramp-rate-limits
    operating:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/unit-commitment/#minimum-part-load
        - https://docs.pypsa.org/latest/examples/unit-commitment/#minimum-up-time
        - https://docs.pypsa.org/latest/examples/unit-commitment/#minimum-down-time
    total:
      source:
        - https://docs.pypsa.org/latest/examples/simple-electricity-market-examples/
        - https://docs.pypsa.org/latest/user-guide/design/#buses
        - https://docs.pypsa.org/latest/user-guide/components/lines/
        - https://docs.pypsa.org/latest/user-guide/components/links/
        - https://docs.pypsa.org/latest/user-guide/optimization/custom-constraints/#custom-constraints
      value: y
  asset__operating_representation:
    ed:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/overview/
      value: y
    uced:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/unit-commitment/
  competition:
    distributed_objectives:
      source: []
      value: n
    portfolio:
      source: []
      value: n
  edge_effects:
    energy_balance:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/energy-balance/
      value: y
    spatial:
      source: []
      value: n
    time_financial:
      source: []
      value: n
    time_operational:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/pathway-planning/#examples
      value: y
  interface__input:
    cli:
      source: []
      value: n
    gui:
      source:
        - https://www.bayesian.energy/convexity
      value: y
    no_code:
      source: []
      value: n
    scripting:
      value: y
      source:
        - https://docs.pypsa.org/latest/api/networks/network/
    standardised:
      source: []
      value: n
  interface__output:
    gui:
      source:
        - https://docs.pypsa.org/latest/user-guide/plotting/charts/#interactive-plots
        - https://github.com/PyPSA/pypsa-server
        - https://github.com/PriyeshGosai/pypsa_network_viewer
        - https://www.bayesian.energy/convexity
      value: y
    logs:
      source:
        - https://docs.pypsa.org/latest/user-guide/logging/
      value: y
    reports:
      source: []
      value: n
    standardised:
      source: []
      value: n
    tables:
      source:
        - https://docs.pypsa.org/latest/user-guide/import-export/#excel
        - https://docs.pypsa.org/latest/user-guide/import-export/#csv-files
      value: y
  optimisation_problem:
    configuration:
      source:
        - https://docs.pypsa.org/latest/api/networks/optimize/#pypsa.Network.optimize.solve_model
      value: y
    decomposition:
      source: []
      value: n
    near_optimal:
      source:
        - https://docs.pypsa.org/latest/examples/mga/
        - https://docs.pypsa.org/latest/api/networks/optimize/#pypsa.Network.optimize.solve_model
      value: y
    sim + opt:
      source: []
      value: n
    user_defined_constraints:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/custom-constraints/#custom-constraints
    user_defined_variables:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/custom-constraints/#custom-constraints
  postprocessing:
    aggregation:
      source:
        - https://docs.pypsa.org/latest/user-guide/statistics/
      value: y
    curtailment:
      value: y
      source:
        - https://docs.pypsa.org/latest/api/networks/statistics/#pypsa.statistics.StatisticsAccessor.curtailment
        - https://docs.pypsa.org/latest/examples/scigrid-lopf-then-pf/#curtailment
    financial:
      source:
        - https://docs.pypsa.org/latest/user-guide/statistics/
      value: y
    future_cost_function:
      source: []
      value: n
    gtc:
      source: []
      value: n
    impact_assessment:
      source:
        - https://docs.pypsa.org/latest/user-guide/statistics/
        - https://docs.pypsa.org/latest/api/components/types/global-constraints/#pypsa.components.GlobalConstraints.add
      value: n
    lcoe:
      source: []
      value: n
    lodf:
      value: y
      source:
        - https://docs.pypsa.org/latest/api/networks/subnetwork/#pypsa.SubNetwork.calculate_BODF
    ptdf:
      source:
        - https://docs.pypsa.org/latest/api/networks/subnetwork/#pypsa.SubNetwork.calculate_PTDF
      value: y
    shadow_prices:
      source:
        - https://docs.pypsa.org/latest/home/features/#analysis-and-usability
        - https://docs.pypsa.org/latest/examples/scigrid-lopf-then-pf/#locational-marginal-prices
        - https://docs.pypsa.org/latest/user-guide/faq/#can-i-model-endogenous-fuel-prices-in-pypsa
      value: y
  preprocessing:
    download:
      source:
        - https://pypsa-eur.readthedocs.io/en/latest/retrieve.html
        - https://pypsa-earth.readthedocs.io/en/latest/data_workflow.html
      # Ecosystem feature
      value: dev
    forecasting:
      source:
        - https://atlite.readthedocs.io/en/latest/
        - https://pypsa-eur.readthedocs.io/en/latest/configuration.html#solar
      # Ecosystem feature
      value: dev
    spatial_distribution:
      value: y
      source:
        - https://docs.pypsa.org/latest/api/components/types/lines/#pypsa.components.Lines.calculate_line_length
  resource_adequacy:
    eens:
      source:
        - https://docs.pypsa.org/latest/api/networks/optimize/?h=load+shedding#pypsa.Network.optimize.add_load_shedding
        - https://docs.pypsa.org/latest/user-guide/statistics/?h=statistics
      value: y
    lolp:
      source: []
      value: n
    maintenance_scheduling:
      source: []
      value: n
    monte_carlo:
      source:
        - https://docs.pypsa.org/latest/user-guide/faq/#can-you-do-generation-adequacy-studies-with-monte-carlo-unplanned-outages
        - https://pypsa-earth.readthedocs.io/en/latest/monte_carlo.html
      value: dev
    sampling:
      source:
        - https://docs.pypsa.org/latest/examples/stochastic-optimization/
      value: y
  robustness:
    asset_outages:
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/dispatch-limits/
        - https://docs.pypsa.org/latest/examples/unit-commitment/#ramp-rate-limits
      value: y
    eens_limit:
      source: []
      value: n
    lolp_limit:
      source: []
      value: n
    multi_stage_stochastic:
      source: []
      value: n
    ram:
      source: []
      value: n
    reserve_limit:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/reserve-power/
    two_stage_stochastic:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/stochastic-optimization/
    voll:
      value: y
      source:
        - https://docs.pypsa.org/latest/api/networks/optimize/#pypsa.Network.optimize.add_load_shedding
  spatial__resolution__simplification:
    network:
      source: []
      value: n
    resampling:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/clustering/
        - https://docs.pypsa.org/latest/api/networks/cluster/?h=clustering#pypsa.clustering.ClusteringAccessor
  system__carriers:
    coupled:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/sector-coupling-single-node/
    decoupled:
      source:
        - https://docs.pypsa.org/latest/examples/simple-electricity-market-examples/
        - https://docs.pypsa.org/latest/examples/islanded-methanol-production/
      value: y
  system__limits:
    capacity:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/reserve-power/#basic-model
    operation:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/global-constraints/#operational-limit
  time__foresight:
    myopic:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/unit-commitment/#rolling-horizon
        - https://docs.pypsa.org/latest/examples/rolling-horizon/#rolling-horizon-optimization
    perfect:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/overview/
  time__horizon:
    multi_year:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/faq/?h=multi+investment#can-investments-be-modelled-for-different-years-over-multiple-decades
    single_year:
      source:
        - https://docs.pypsa.org/latest/user-guide/design/#snapshots
      value: y
    sub_day:
      source:
        - https://docs.pypsa.org/latest/user-guide/design/#snapshots
      value: y
    sub_year:
      source:
        - https://docs.pypsa.org/latest/user-guide/design/#snapshots
      value: y
  time__resolution__simplification:
    distortion_mitigation:
      source:
        - https://docs.pypsa.org/latest/examples/time-series-aggregation/?h=tsam
      # Ecosystem feature
      value: dev
    load_duration_curves:
      source: []
      value: n
    resampling:
      value: y
      source:
        - https://docs.pypsa.org/latest/examples/time-series-aggregation/
        - https://github.com/PyPSA/PyPSA/blob/c5346226ad01de2a9157f8aa198cd14e9fbcfa92/pypsa/common.py#L771
    typical_periods:
      source:
        - https://docs.pypsa.org/latest/examples/time-series-aggregation/
      value: y
  transmission__limits:
    gtc:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/lines/
      value: y
    phase_angle:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/lines/
      value: dev
    ptdf:
      value: y
      source:
        - https://docs.pypsa.org/latest/api/networks/subnetwork/#pypsa.SubNetwork.calculate_PTDF
    thermal:
      source:
        - https://github.com/PyPSA/pypsa-eur/blob/3679dc5b49aefd082ca36ebfc0c1df4ce4bbd435/scripts/build_line_rating.py#L72
      # Ecosystem feature
      value: dev
  transmission__opf:
    ac_opf:
      source:
        - https://docs.pypsa.org/latest/user-guide/linear-power-flow/
      value: y
    dc_opf:
      source:
        - https://docs.pypsa.org/latest/user-guide/linear-power-flow/
      value: y
    sec_opf:
      value: y
      source:
        - https://docs.pypsa.org/latest/user-guide/optimization/contingencies/#n-1-security-constraints-for-sclopf
    transport:
      source:
        - https://docs.pypsa.org/latest/user-guide/components/links/
      value: y
